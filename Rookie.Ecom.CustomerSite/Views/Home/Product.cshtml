@model Rookie.Ecom.Contracts.PagedResponseModel<ProductListDto>
@{
    ViewData["Title"] = "Product";
    Layout = "_Layout";
}
<link rel="stylesheet" href="~/css/public/jquery-ui.css" />
<!-- banner-bootom-w3-agileits -->
<div class="banner-bootom-w3-agileits">
    <div class="container-fluid">
        <!-- mens -->
        <div class="col-md-4 products-left">
            <div class="filter-price">
                <h3>Filter By <span>Price</span></h3>
                <ul class="dropdown-menu6">
                    <li>
                        <div id="slider-range"></div>
                        <input type="text" id="amount" style="border: 0; color: #ffffff; font-weight: normal;" />
                    </li>
                </ul>
            </div>
            <div class="css-treeview">
                <h4>Categories</h4>
                <ul class="tree-list-pad">
                    <li>
                        <input type="checkbox" checked="checked" id="item-0" /><label for="item-0"><i class="fa fa-long-arrow-right" aria-hidden="true"></i> Men's Wear</label>
                        <ul>
                            <li>
                                <input type="checkbox" id="item-0-0" /><label for="item-0-0"><i class="fa fa-long-arrow-right" aria-hidden="true"></i>Ethnic Wear</label>
                                <ul>
                                    <li><a href="mens.html">Shirts</a></li>
                                    <li><a href="mens.html">Caps</a></li>
                                    <li><a href="mens.html">Shoes</a></li>
                                    <li><a href="mens.html">Pants</a></li>
                                    <li><a href="mens.html">SunGlasses</a></li>
                                    <li><a href="mens.html">Trousers</a></li>
                                </ul>
                            </li>
                            <li>
                                <input type="checkbox" id="item-0-1" /><label for="item-0-1"><i class="fa fa-long-arrow-right" aria-hidden="true"></i> Party Wear</label>
                                <ul>
                                    <li><a href="mens.html">Shirts</a></li>
                                    <li><a href="mens.html">Caps</a></li>
                                    <li><a href="mens.html">Shoes</a></li>
                                    <li><a href="mens.html">Pants</a></li>
                                    <li><a href="mens.html">SunGlasses</a></li>
                                    <li><a href="mens.html">Trousers</a></li>
                                </ul>
                            </li>
                            <li>
                                <input type="checkbox" id="item-0-2" /><label for="item-0-2"><i class="fa fa-long-arrow-right" aria-hidden="true"></i> Casual Wear</label>
                                <ul>
                                    <li><a href="mens.html">Shirts</a></li>
                                    <li><a href="mens.html">Caps</a></li>
                                    <li><a href="mens.html">Shoes</a></li>
                                    <li><a href="mens.html">Pants</a></li>
                                    <li><a href="mens.html">SunGlasses</a></li>
                                    <li><a href="mens.html">Trousers</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <input type="checkbox" id="item-1" checked="checked" /><label for="item-1"><i class="fa fa-long-arrow-right" aria-hidden="true"></i> Best Collections</label>
                    </li>
                    <li>
                        <input type="checkbox" checked="checked" id="item-2" /><label for="item-2"><i class="fa fa-long-arrow-right" aria-hidden="true"></i> Best Offers</label>
                    </li>
                </ul>
            </div>
            <div class="community-poll">
                <h4>Community Poll</h4>
                <div class="swit form">
                    <form>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio" checked=""><i></i>More convenient for shipping and delivery</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>Lower Price</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>Track your item</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>Bigger Choice</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>More colors to choose</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>Secured Payment</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>Money back guaranteed</label> </div></div>
                        <div class="check_box"> <div class="radio"> <label><input type="radio" name="radio"><i></i>Others</label> </div></div>
                        <input type="submit" value="SEND">
                    </form>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="col-md-8 products-right">
            <h5>Product <span>Compare(0)</span></h5>
            <div class="sort-grid">
                <div class="sorting">
                    <h6>Sort By</h6>
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            @ViewData["NameSortParm"]
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li>
                                <a asp-action="Product" asp-route-sortOrder="name_az"
                                   asp-route-Category="@ViewData["Category"]"
                                   asp-route-minprice="@ViewBag.minprice"
                                   asp-route-maxprice="@ViewBag.maxprice"
                                   asp-route-currentFilter="@ViewData["CurrentFilter"]">Name(A - Z)</a>
                            </li>
                            <li>
                                <a asp-action="Product" asp-route-sortOrder="name_za"
                                   asp-route-Category="@ViewData["Category"]"
                                   asp-route-minprice="@ViewBag.minprice"
                                   asp-route-maxprice="@ViewBag.maxprice"
                                   asp-route-currentFilter="@ViewData["CurrentFilter"]">Name(Z - A)</a>
                            </li>
                            <li>
                                <a asp-action="Product" asp-route-sortOrder="price_desc"
                                   asp-route-Category="@ViewData["Category"]"
                                   asp-route-minprice="@ViewBag.minprice"
                                   asp-route-maxprice="@ViewBag.maxprice"
                                   asp-route-currentFilter="@ViewData["CurrentFilter"]">Price(High - Low)</a>
                            </li>
                            <li>
                                <a asp-action="Product" asp-route-sortOrder="price_asc"
                                   asp-route-Category="@ViewData["Category"]"
                                   asp-route-minprice="@ViewBag.minprice"
                                   asp-route-maxprice="@ViewBag.maxprice"
                                   asp-route-currentFilter="@ViewData["CurrentFilter"]">Price(Low - High)</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="sorting">
                    <h6>Showing</h6>
                    <select id="country2" onchange="change_country(this.value)" class="frm-field required sect">
                        <option value="null">7</option>
                        <option value="null">14</option>
                        <option value="null">28</option>
                        <option value="null">35</option>
                    </select>
                    <div class="clearfix"></div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="men-wear-bottom">
                <div class="col-sm-4 men-wear-left">
                    <img class="img-responsive" src="https://images.unsplash.com/photo-1618333262686-d0bdf1e9089f?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=527&q=80" alt=" " />
                </div>
                <div class="col-sm-8 men-wear-right">
                    @if (Model.Items.Any())
                    {
                        <h4>@Model.Items.FirstOrDefault().CategoryName <span>Collections</span></h4>
                    }
                    else
                    {
                        <h4>OUR <span>Collections</span></h4>
                    }
                    <p>
                        Sed ut perspiciatis unde omnis iste natus error sit voluptatem
                        accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae
                        ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt
                        explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut
                        odit aut fugit.
                    </p>
                </div>
                <div class="clearfix"></div>
            </div>
            @foreach (var item in Model.Items)
            {
                <div class="col-md-4 product-men">
                    <div class="men-pro-item simpleCart_shelfItem">
                        <div class="men-thumb-item">
                            <img src="@item.ImagePath" alt="@item.ImageTitle" class="pro-image-front">
                            <img src="@item.SecondImagePath" alt="@item.ImageTitle" class="pro-image-back">
                            <div class="men-cart-pro">
                                <div class="inner-men-cart-pro">
                                    <a class="link-product-add-cart" data-toggle="modal" data-target="#modal-popUP" id="@item.Id">Xem nhanh</a>

                                    @*<a data-toggle="modal" asp-controller="Home" asp-action="QuickViewProduct" asp-route-product="@item.Id" data-target="#modal-popUP" class="link-product-add-cart">Xem nhanh</a>*@
                                </div>
                            </div>
                            <span class="product-new-top">@item.CategoryName</span>

                        </div>
                        <div class="item-info-product ">
                            <h4><a asp-controller="Home" asp-action="ProductDetails" asp-route-product="@item.Id">@item.Name</a></h4>
                            <div class="info-product-price">
                                <span class="item_price">@item.FinalPrice VNĐ</span>
                                <del>@item.Price</del>
                                <i>@item.Discount%</i>
                            </div>
                        </div>
                    </div>
                </div>
            }
            <div class="clearfix"></div>
            @{
                var prevDisabled = !(Model.CurrentPage > 1) ? "disabled" : "";
                var nextDisabled = !(Model.CurrentPage < Model.TotalPages) ? "disabled" : "";
            }

            
            

            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li>
                        <a asp-action="Product"
                           asp-route-sortOrder="@ViewData["CurrentSort"]"
                           asp-route-Category="@ViewData["Category"]"
                           asp-route-pageNumber="@(Model.CurrentPage - 1)"
                           asp-route-currentFilter="@ViewData["CurrentFilter"]"
                           asp-route-minprice="@ViewBag.minprice"
                           asp-route-maxprice="@ViewBag.maxprice"
                           class="btn btn-default @prevDisabled">
                            Previous
                        </a>
                    </li>
                    <li>
                        <a asp-action="Product"
                           asp-route-sortOrder="@ViewData["CurrentSort"]"
                           asp-route-Category="@ViewData["Category"]"
                           asp-route-pageNumber="@(Model.CurrentPage + 1)"
                           asp-route-currentFilter="@ViewData["CurrentFilter"]"
                           asp-route-minprice="@ViewBag.minprice"
                           asp-route-maxprice="@ViewBag.maxprice"
                           class="btn btn-default @nextDisabled">
                            Next
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="clearfix"></div>

        <div class="single-pro">

            <div class="clearfix"></div>
        </div>
    </div>
</div>
<!-- //mens -->
<!-- //cart-js -->
<!---->
<script type="text/javascript" src="js/jquery-ui.js"></script>
<script type='text/javascript'>
    //<![CDATA[
    function GetData(Minprice, Maxprice) {
        $.ajax({
            url: '@Url.Action("Product", "Home")',
            data: {
                minprice: Minprice,
                maxprice: Maxprice
            },
        })
            .done(function (res) { console.log(res) })
         ;
    }

    $(window).load(function () {
        $("#slider-range").slider({
            range: true,
            step: 50000,
            min: 0,
            max: 1000000,
            values: [@ViewBag.minprice, @ViewBag.maxprice],
            slide: function (event, ui) {
                $("#amount").val(ui.values[0] + "đ - " + ui.values[1] + "đ");

            },
            stop: function (event, ui) {
                window.location.href =
                    "https://localhost:5002/Home/Product?sortOrder="+"@ViewData["CurrentSort"]"+
                    "&Category=" + "@ViewData["Category"]"
                    +"&minprice=" +ui.values[0]
                    +"&maxprice=" +ui.values[1];
                //window.location
                //var a = ui.values[0];
                //var b = ui.values[1];
                //GetData(a, b);
                console.log('Ahihi',ui);
            }
        });
        $("#amount").val($("#slider-range").slider("values", 0) + "đ - " + $("#slider-range").slider("values", 1) + "đ");

    });//]]>



</script>

<!---->
@await Html.PartialAsync("_Modal", new BootstrapModel
{
    ID = "modal-popUP",
                                            AreaLabeledId = "modal-popUP-label",
                                            Size = ModalSize.Medium,
                                            Idcontent = "my-modal-quickview"
})

@*@Html.Partial("_Modal", new BootstrapModel { ID = "modal-popUP", AreaLabeledId = "modal-popUP-label", Size = ModalSize.Medium })*@